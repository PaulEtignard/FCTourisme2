{% extends 'base.html.twig' %}
{% block title %}

    {% if route =="app_etablissement_fav" %}
        Liste des Etablissements favori
    {% else %}
        Liste des Etablissements
    {% endif %}

{% endblock %}


{% block body %}
    <div>

        <div class="mx-auto" style="display: flex;align-items: center; width: 80%;justify-content: space-between ">
            <div class="d-flex">
                <a class="mb-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" href="{{ path('app_etablissements') }}" role="button">
                    <span class="me-1">Tout</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-asterisk" viewBox="0 0 16 16">
                        <path d="M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z"/>
                    </svg>
                </a>
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button"
                   href="{{ path("app_etablissement_categorie", {'categorie': 'Artisanat'}) }}">
                    <span class="me-1">Artisanat</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-hammer" viewBox="0 0 16 16">
                        <path d="M9.972 2.508a.5.5 0 0 0-.16-.556l-.178-.129a5.009 5.009 0 0 0-2.076-.783C6.215.862 4.504 1.229 2.84 3.133H1.786a.5.5 0 0 0-.354.147L.146 4.567a.5.5 0 0 0 0 .706l2.571 2.579a.5.5 0 0 0 .708 0l1.286-1.29a.5.5 0 0 0 .146-.353V5.57l8.387 8.873A.5.5 0 0 0 14 14.5l1.5-1.5a.5.5 0 0 0 .017-.689l-9.129-8.63c.747-.456 1.772-.839 3.112-.839a.5.5 0 0 0 .472-.334z"/>
                    </svg>
                </a>
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button" href="{{ path("app_etablissement_categorie", {'categorie': 'Hotel'}) }}">
                    <span class="me-1">Hotel</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-building-fill" viewBox="0 0 16 16">
                        <path d="M3 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h3v-3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V16h3a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H3Zm1 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5ZM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM7.5 5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM4.5 8h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Z"/>
                    </svg>
                </a>
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button" href="{{ path("app_etablissement_categorie", {'categorie': 'Gites'}) }}">
                    <span class="me-1">Gites</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-house-door-fill" viewBox="0 0 16 16">
                        <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"/>
                    </svg>
                </a>
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button" href="{{ path("app_etablissement_categorie", {'categorie': 'Musée'}) }}">
                    <span class="me-1">Musée</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-brush-fill" viewBox="0 0 16 16">
                        <path d="M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.067 6.067 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.118 8.118 0 0 1-3.078.132 3.659 3.659 0 0 1-.562-.135 1.382 1.382 0 0 1-.466-.247.714.714 0 0 1-.204-.288.622.622 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896.126.007.243.025.348.048.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04z"/>
                    </svg>
                </a>
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button"
                   href="{{ path("app_etablissement_categorie", {'categorie': 'Restaurant'}) }}">
                    <span class="me-1">Restaurant</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-basket-fill" viewBox="0 0 16 16">
                        <path d="M5.071 1.243a.5.5 0 0 1 .858.514L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 6h1.717L5.07 1.243zM3.5 10.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3z"/>
                    </svg>
                </a>
            </div>

            {% if app.user %}
                <a class="mb-2 ms-2" style="width: 100px; height: 35px; background-color: #FFFFFF; text-decoration: none; border-radius: 10px ; display: flex;    align-items: center;
    justify-content: center;" role="button" href="{{ path("app_etablissement_fav") }}">
                    <span class="me-1">Favoris</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                </a>
            {% endif %}


        </div>

        <div class="container text-center">
            <div class="row row-cols-1 row-cols-lg-3 g-2 g-lg-2">
                {% for Etablissement in Etablissements %}
                    <div class="col">
                        <div style="background-color: #FFFFFF; width:100%; height: 300px; border-radius: 10px">
                            <h3 style="padding-top: 20px">{{ Etablissement.nom }}</h3>
                            {% for categorie in Etablissement.categorie %}
                                <span class="badge text-dark">{{ categorie.nom }}</span>
                            {% endfor %}
                            <p class="mx-auto"
                               style="padding-top:5px; border-radius: 5px; background-color: #D9D9D9; width: 90%;height: 30%">{{ Etablissement.description[:75] }}
                                ...</p>
                            <div style="display: flex; width: 100%; height: 35%; padding-top: 0; padding-right: 20px; padding-left: 20px; padding-bottom: 20px">
                                <div class="mx-auto"
                                     style="padding:10px;border-radius: 5px; background-color: #D9D9D9; width: 130%;height: 100%">{{ Etablissement.adresse }}
                                    | {{ Etablissement.ville.nom }}{{ Etablissement.ville.codePostal }}</div>
                                <div style="background-color: #D9D9D9;border-radius: 10px; height: 100%; width: 15%; margin-left: 10px; padding: 10px; display: flex; flex-direction: column;justify-content: space-around;">
                                    {% if app.user %}
                                        {% if Etablissement in app.user.EtablissementFavorits %}
                                            <a style="text-decoration: none"
                                                    {% if route == "app_etablissement_categorie" %}
                                               href="{{ path("app_etablissement_slug_cat_fav", {'slug': Etablissement.slug, 'cat': categorie.nom}) }}">
                                                {% elseif route == "app_etablissement_fav" %}
                                                    href="{{ path("app_etablissementfav_slug_fav", {'slug': Etablissement.slug}) }}">
                                                {% else%}
                                                    href="{{ path("app_etablissement_slug_fav", {'slug': Etablissement.slug}) }}">
                                                {% endif%}
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                                </svg>
                                            </a>
                                        {% else %}
                                            <a style="text-decoration: none"
                                                    {% if route == "app_etablissement_categorie" %}
                                               href="{{ path("app_etablissement_slug_cat_fav", {'slug': Etablissement.slug, 'cat': categorie.nom}) }}">
                                                {% elseif route == "app_etablissement_fav" %}
                                                    href="{{ path("app_etablissementfav_slug_fav", {'slug': Etablissement.slug}) }}">
                                                {% else%}
                                                    href="{{ path("app_etablissement_slug_fav", {'slug': Etablissement.slug}) }}">
                                                {% endif%}
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                                </svg>
                                            </a>
                                        {% endif %}
                                    {% endif %}
                                    <a class=""
                                       href="{{ path("app_etablissement_slug", {'slug': Etablissement.slug}) }}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                             fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                                            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>


        <div class="container mt-4">
            <div class="row">
                <div class="d-flex align-items-center justify-content-center">
                    {{ knp_pagination_render(Etablissements) }}
                </div>
            </div>
        </div>

    </div>
{% endblock %}